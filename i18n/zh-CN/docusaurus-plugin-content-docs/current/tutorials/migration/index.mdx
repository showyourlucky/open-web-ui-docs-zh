---
sidebar_position: 5
title: "ğŸ”„ è¿ç§»"
---

## å°† LiteLLM ä»å†…éƒ¨è¿ç§»åˆ°å¤–éƒ¨

åœ¨ 0.2 ç‰ˆæœ¬ä¹‹å‰ï¼ŒOpen WebUI å†…éƒ¨è¿è¡Œ `litellm`ã€‚ä¸ºäº†æé«˜æ¨¡å—åŒ–å’Œçµæ´»æ€§ï¼Œæˆ‘ä»¬å»ºè®®å°† `litellm` åœ¨å…¶ä¸“å±å®¹å™¨ä¸­è¿è¡Œã€‚æœ¬æŒ‡å—å°†å¼•å¯¼æ‚¨å®Œæˆè¿ç§»è¿‡ç¨‹ã€‚

### 1. ä¸‹è½½ `config.yaml` æ–‡ä»¶

åœ¨è¿›è¡Œä»»ä½•æ›´æ”¹ä¹‹å‰ï¼Œè¯·ä» Open WebUI ç®¡ç†è®¾ç½®çª—å£ä¸‹è½½ç°æœ‰çš„ `config.yaml` æ–‡ä»¶ã€‚è¯¥æ–‡ä»¶åŒ…å«äº†æ‚¨å½“å‰çš„ `litellm` é…ç½®ã€‚

![LiteLLM config.yaml ä¸‹è½½](/img/migration_litellm_config.png)

### 2. è¿è¡Œç‹¬ç«‹çš„ `litellm` å®¹å™¨

ä½¿ç”¨ä»¥ä¸‹ `docker run` å‘½ä»¤å¯åŠ¨ä¸€ä¸ªä¸“ç”¨çš„ `litellm` å®¹å™¨ï¼š

```bash
docker run -d \
  -p 4000:4000 \
  --name litellm \
  -v ./config.yaml:/app/config.yaml \
  -e LITELLM_MASTER_KEY=your_secret_key \
  --restart always \
  ghcr.io/berriai/litellm:main-latest \
  --config /app/config.yaml --port 4000
```

- å°† `./config.yaml` æ›¿æ¢ä¸ºæ‚¨å®é™…ä¸‹è½½çš„ `config.yaml` æ–‡ä»¶è·¯å¾„ã€‚
- è®¾ç½®ä¸€ä¸ªå®‰å…¨çš„ API å¯†é’¥ä½œä¸º `LITELLM_MASTER_KEY`ã€‚è¿™å¯ä»¥ç¡®ä¿å¯¹æ‚¨çš„ `litellm` å®ä¾‹è¿›è¡Œå—æ§è®¿é—®ã€‚

### 3. å°† `litellm` è¿æ¥åˆ° Open WebUI

ä¸€æ—¦ `litellm` å®¹å™¨å¯åŠ¨å¹¶è¿è¡Œï¼š

1. å‰å¾€ Open WebUI è®¾ç½®ã€‚
2. åœ¨â€œè¿æ¥â€é€‰é¡¹ä¸‹ï¼Œæ·»åŠ ä¸€ä¸ªæ–°çš„â€œOpenAIâ€è¿æ¥ã€‚
3. å°†åŸºç¡€ URL è®¾ç½®ä¸º `http://host.docker.internal:4000/v1`ï¼ˆå¦‚æœ‰å¿…è¦ï¼Œè¯·è°ƒæ•´ç«¯å£å·ï¼‰ã€‚
4. å¯¹äº API å¯†é’¥ï¼Œä½¿ç”¨æ‚¨åœ¨æ­¥éª¤ 2 ä¸­å®šä¹‰çš„ `LITELLM_MASTER_KEY` å€¼ï¼ˆä¾‹å¦‚ `your_secret_key`ï¼‰ã€‚

æ­å–œï¼æ‚¨å·²æˆåŠŸè¿ç§»åˆ°å¤–éƒ¨ `litellm` è®¾ç½®ï¼Œä»è€Œå¢å¼ºäº† Open WebUI å®‰è£…çš„çµæ´»æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚

## ä» Ollama WebUI è¿ç§»å†…å®¹åˆ° Open WebUI

é‰´äºæœ€è¿‘ä» [Ollama WebUI æ›´åä¸º Open WebUI](https://github.com/open-webui/open-webui/discussions/602)ï¼ŒDocker é•œåƒåç§°ä¹Ÿç›¸åº”æ›´æ”¹ã€‚å¯¹äºé‚£äº›ä»¥å‰ä½¿ç”¨ Ollama WebUI å¹¶å¸Œæœ›å¼€å§‹ä½¿ç”¨æ–°é•œåƒçš„ç”¨æˆ·ï¼Œéœ€è¦æ‰§è¡Œä¸€äº›é¢å¤–æ­¥éª¤ã€‚

## æ›´æ–°è‡³ Open WebUI è€Œä¸ä¿ç•™æ•°æ®

å¦‚æœæ‚¨æƒ³æ›´æ–°åˆ°æ–°çš„é•œåƒä½†ä¸æƒ³ä¿ç•™ä¹‹å‰çš„ä»»ä½•æ•°æ®ï¼ˆå¦‚å¯¹è¯ã€æç¤ºã€æ–‡æ¡£ç­‰ï¼‰ï¼Œå¯ä»¥æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š

:::danger

æ‰§è¡Œè¿™äº›æ­¥éª¤å°†åˆ é™¤æ‰€æœ‰å½“å‰é…ç½®é€‰é¡¹ã€èŠå¤©è®°å½•ç­‰ã€‚ä»…ä¿ç•™ LLM æ¨¡å‹ã€‚

:::

```bash
docker rm -f ollama-webui
docker pull ghcr.io/open-webui/open-webui:main
[æ’å…¥æ‚¨ä½¿ç”¨æ–° Docker é•œåƒåç§°æ—¶ç­‰æ•ˆçš„å®‰è£…å‘½ä»¤]
docker volume rm ollama-webui
```

ä¾‹å¦‚ï¼Œæœ¬åœ°å®‰è£…çš„å‘½ä»¤æ˜¯ `docker run -d -p 3000:8080 --add-host=host.docker.internal:host-gateway -v open-webui:/app/backend/data --name open-webui --restart always ghcr.io/open-webui/open-webui:main`ã€‚å¯¹äºå…¶ä»–å®‰è£…å‘½ä»¤ï¼Œè¯·å‚é˜…æ­¤ README æ–‡æ¡£çš„ç›¸å…³éƒ¨åˆ†ã€‚

## æ›´æ–°è‡³ Open WebUI å¹¶ä¿ç•™æ•°æ®

å¦‚æœæ‚¨å¸Œæœ›æ›´æ–°åˆ°æ–°çš„é•œåƒï¼Œå¹¶è¿ç§»æ‰€æœ‰ä¹‹å‰çš„è®¾ç½®ï¼ˆå¦‚å¯¹è¯ã€æç¤ºã€æ–‡æ¡£ç­‰ï¼‰ï¼Œå¯ä»¥æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š

```bash
docker rm -f ollama-webui
docker pull ghcr.io/open-webui/open-webui:main
# åˆ›å»ºä¸€ä¸ªæ–°å·ï¼Œå¹¶ä½¿ç”¨ä¸´æ—¶å®¹å™¨å°†ä¸€ä¸ªå·çš„å†…å®¹å¤åˆ¶åˆ°å¦ä¸€ä¸ªå·ï¼Œå…·ä½“æ–¹æ³•è§ https://github.com/moby/moby/issues/31154#issuecomment-360531460
docker volume create --name open-webui
docker run --rm -v ollama-webui:/from -v open-webui:/to alpine ash -c "cd /from ; cp -av . /to"
[æ’å…¥æ‚¨ä½¿ç”¨æ–° Docker é•œåƒåç§°æ—¶ç­‰æ•ˆçš„å®‰è£…å‘½ä»¤]
```

ä¸€æ—¦ç¡®è®¤æ‰€æœ‰æ•°æ®éƒ½å·²è¿ç§»ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤åˆ é™¤æ—§å·ï¼š

```bash
docker volume rm ollama-webui
```

### æ¥è‡ªæœ¬åœ° Git ä»“åº“

å¦‚æœæ‚¨æ˜¯ä»ä¸€ä¸ª Git å®‰è£…é¡¹ç›®æ¥çš„ï¼Œå¹¶ä¸”ä½¿ç”¨äº† `docker compose up` å‘½ä»¤åœ¨é¡¹ç›®ç›®å½•ä¸­è¿è¡Œï¼Œé‚£ä¹ˆæ‚¨çš„å·åç§°å°†å¸¦æœ‰æ–‡ä»¶å¤¹å‰ç¼€ã€‚
å› æ­¤ï¼Œå¦‚æœæ‚¨çš„ OpenWebUI è·¯å¾„æ˜¯ `/home/myserver/ollama-webui/`ï¼Œåˆ™å·åç§°å°†æ˜¯ "ollama-webui_open-webui" å’Œ "ollama-webui_ollama"ã€‚

è¦å°†å†…å®¹å¤åˆ¶åˆ°å¸¸è§„çš„ Docker å®‰è£…ä¸­ï¼Œæ‚¨å¯ä»¥è¿è¡Œç±»ä¼¼çš„è¿ç§»å‘½ä»¤ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š
```bash
docker rm -f open-webui
docker rm -f ollama
docker pull ghcr.io/open-webui/open-webui:main
docker pull ghcr.io/open-webui/open-webui:ollama
docker volume create --name open-webui
docker volume create --name ollama
docker run --rm -v ollama-webui_open-webui:/from -v open-webui:/to alpine ash -c "cd /from ; cp -av . /to"
docker run --rm -v ollama-webui_ollama:/from -v ollama:/to alpine ash -c "cd /from ; cp -av . /to"
```

æ ¹æ®æ‚¨æ˜¯å¦å®‰è£…äº† ollama æˆ–è€…å·²ç»ä½¿ç”¨ç›¸åŒçš„å·åç§°ï¼ŒæŸäº›å‘½ä»¤å¯èƒ½ä¼šæŠ¥é”™ï¼Œä½†é€šå¸¸å¯ä»¥å¿½ç•¥è¿™äº›é”™è¯¯ï¼Œå› ä¸ºæˆ‘ä»¬æ˜¯åœ¨è¦†ç›–ã€‚

ç„¶åï¼ŒæŒ‰ç…§å…¥é—¨æŒ‡å—ä¸­çš„è¯´æ˜æ­£å¸¸å¯åŠ¨ä¸¤ä¸ªå®¹å™¨ã€‚

ä¸€æ—¦ç¡®è®¤æ‰€æœ‰æ•°æ®éƒ½å·²è¿ç§»ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ä¸Šè¿° `docker volume rm` å‘½ä»¤åˆ é™¤æ—§å·ã€‚